# Повышение привилегий в Linux (Privilege Escalation)

## Описание
Повышение привилегий в Linux — процесс получения прав root или администратора из обычного пользователя. Включает множество техник: эксплойты ядра, поиск паролей, манипуляцию правами доступа к файлам, псевдо-эксплойты, SUID-атаки, атаки на возможности, NFS, запланированные задачи, Docker.

## Уровень
Продвинутый

## Этапы взлома
1. Сбор информации (Reconnaissance)
2. Сканирование (Scanning)
3. Перечисление (Enumeration)
4. Эксплуатация (Exploitation)
5. Повышение привилегий (Privilege Escalation)

## Методы повышения привилегий

### Перечисление систем Linux
- Ручное перечисление: анализ версии ядра, архитектуры, процессов, пользователей, сетей.
- Автоматизированные инструменты: LinPEAS, Linuxprivchecker.py, LSE, linenum.sh.
- Важность пошагового подхода и использования нескольких руководств.

### Эксплойты ядра
- Поиск уязвимостей ядра на основе версии и дистрибутива.
- Использование команды `uname -a` для определения версии ядра.
- Примеры эксплойтов: Dirty COW, Full Nelson, Half Nelson, kmod.
- Компиляция и запуск эксплойтов для получения прав root.

### Поиск паролей
- Поиск сохранённых паролей в истории команд.
- Анализ конфигурационных файлов (irssi, myvpn.ovpn).
- Поиск паролей в домашней папке и системных файлах.
- Использование grep для поиска по ключевым словам (passwd, password).

### Права доступа к файлам
- Проверка доступа к конфиденциальным файлам (/etc/passwd, /etc/shadow).
- Анализ слабых прав доступа к файлам.
- Использование `unshadow` для преобразования файлов паролей.
- Взлом хэшей паролей с помощью hashcat.

### SSH-ключи
- Поиск закрытых SSH-ключей (id_rsa, backup keys).
- Проверка авторизованных ключей в папке .ssh.
- Подключение по SSH с использованием найденных ключей.

### Псевдо-эксплойты (Sudo Exploits)
- Злоупотребление sudo для получения прав root.
- Использование GTFO Bins для поиска уязвимых бинарников.
- Примеры: vim, awk, wget, Apache.
- CVE-2019-14287: уязвимость sudo с идентификатором пользователя -1.
- CVE-2019-18634: уязвимость sudo с обратной связью pw.

### SUID-атаки
- Поиск файлов с битом SUID с помощью команды `find`.
- Анализ уязвимых бинарников (systemctl, vim, bash).
- Использование systemctl с SUID для создания сервисов и получения root.

### LD_PRELOAD атаки
- Предварительная загрузка библиотек через LD_PRELOAD.
- Создание вредоносной библиотеки для эскалации привилегий.
- Компиляция и запуск кода для получения прав root.

### Атаки на возможности (Capabilities)
- Анализ возможностей процессов и бинарников.
- Злоупотребление возможностями для получения привилегий.

### NFS
- Анализ настроек NFS для поиска уязвимостей.
- Использование NFS для получения доступа к файлам.

### Запланированные задачи
- Поиск cron jobs и systemd timers.
- Анализ запланированных задач для поиска уязвимостей.
- Злоупотребление запланированными задачами для эскалации.

### Docker
- Анализ контейнеров Docker для поиска уязвимостей.
- Использование Docker для получения доступа к хосту.

## Инструменты для перечисления

### Автоматизированные инструменты
- **LinPEAS**: скрипт для повышения привилегий в Linux с цветовой координацией.
- **Linuxprivchecker.py**: инструмент на Python для анализа привилегий.
- **LSE (Linux Smart Enumeration)**: популярный инструмент с регулярными обновлениями.
- **linenum.sh**: скрипт для поиска эксплойтов в Linux.

## Ресурсы для изучения
- Payloads All The Things — современное руководство по повышению привилегий
- GTFO Bins — база данных уязвимых бинарников
- TryHackMe — платформа для практики
- Linux Privesc Playground — бесплатный ресурс для практики

## Важные предупреждения
- Использование только в образовательных целях и с разрешения.
- Тестирование только на собственных системах или с явного разрешения.
- Понимание юридических последствий незаконного использования.

## Заметки
(Добавляйте свои заметки, примеры кода или ссылки на видео.)

